# Item 24 - 멤버 클래스는 되도록 static으로 만들라

## 중첩 클래스

- 다른 클래스 안에 정의된 클래스
- 자신을 감싼 바깥 클래스에서만 사용되어야 함
- 종류
    - 정적 멤버 클래스
    - 비정적 멤버 클래스
    - 익명 클래스
    - 지역 클래스

## 정적 멤버 클래스

- class 내부에서 static으로 선언된 클래스
- 다른 클래스 안에 선언된다.
- 바깥 클래스의 private 멤버에도 접근할 수 있다.
- 다른 점은 일반 클래스와 동일하다

## 비정적 멤버 클래스

- 바깥 클래스의 인스턴스와 암묵적으로 연결
- 비정적 멤버 클래스의 인스턴스 메서드에서 정규화된 this`(classname.this)`를 사용해 바깥 인스턴스의 메서드를 호출하거나 참조를 가져올 수 있다.
- 개념상 중첩 클래스의 인스턴스가 바깥 인스턴스와 독립적으로 존재할 수 있다면 정적 멤버 클래스로 만들어야 한다.
- 비정적 멤버 클래스와 바깥 인스턴스 사이의 관계는 멤버 클래스가 인스턴스화될 때 확립되며, 더이상 변경할 수 없다.
- 어댑터를 정의하는데 자주 쓰인다.

## 멤버 클래스에서 바깥 인스턴스에 접근할 일이 없다면 무조건 static을 붙여서 정적 멤버 클래스로 만들자!!

이유는 static을 생략하여 비정적 멤버 클래스로 생성할 경우 바깥 인스턴스로의 숨은 외부 참조를 갖게 되기 때문이다.

### 이렇게 되면 단점은..

1. 숨은 외부참조는 추가적인 시간과 메모리 공간을 소비한다.
2. 가비지 컬렉션이 바깥 클래스의 인스턴스를 수거하지 못하는 메모리 누수가 생길 수 있다.
3. 참조가 눈에 보이지 않아 문제의 원인을 찾기 어려워 때로는 심각한 상황을 초래할 수 있다.

## 익명 클래스

- 익명 클래스는 이름이 없다. (익명이니까!)
- 익명 클래스는 바깥 클래스의 멤버도 아니다.
- 멤버와 달리, 쓰이는 시점에 선언과 동시에 인스턴스가 만들어진다.
- 정적 문맥에서라도 상수 변수 이외의 정적 멤버는 가질 수 없다. 즉, 상수 표현을 위해 초기화된 final 기본 타입과 문자열 필드만 가질 수 있다.
- 이전에는 즉석에서 작은 함수 객체나 처리 객체를 만드는데 익명 클래스를 사용했지만 이제 람다에게 물려주었다.

## 지역 클래스

- 가장 드물게 사용됨.
- 지역 변수를 선언할 수 있는 곳이면 실질적으로 어디서든 선언할 수 있고, 유효 범위도 지역 변수와 같음.
- 멤버 클래스처럼 이름이 있고 반복해서 사용할 수 있음.
- 익명 클래스처럼 비정적 문맥에서 사용될 때만 바깥 인스턴스를 참조할 수 있으며, 정적 멤버는 가질 수 없으며 가독성을 위해 짧게 작성해야 한다.
